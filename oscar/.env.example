# OSCAR Agent Configuration
# Copy this file to .env and update with your actual values

# Slack Configuration
SLACK_BOT_TOKEN=xoxb-your-bot-token-here
SLACK_SIGNING_SECRET=your-signing-secret-here

# AWS Configuration
AWS_REGION=us-east-1
AWS_ACCOUNT_ID=your-aws-account-id
AWS_DEFAULT_REGION=us-east-1

# OSCAR Bedrock Agent Configuration
OSCAR_BEDROCK_AGENT_ID=your-bedrock-agent-id
OSCAR_BEDROCK_AGENT_ALIAS_ID=your-bedrock-agent-alias-id
KNOWLEDGE_BASE_ID=your-knowledge-base-id

# Authorization
AUTHORIZED_MESSAGE_SENDERS=U123456789,U987654321
CHANNEL_ALLOW_LIST=C123456789,C987654321 
#the above are example user and channel IDs

# DynamoDB Tables
SESSIONS_TABLE_NAME=oscar-agent-sessions
CONTEXT_TABLE_NAME=oscar-agent-context

# TTL Settings (seconds)
DEDUP_TTL=300
SESSION_TTL=3600
CONTEXT_TTL=604800

# Context Management
MAX_CONTEXT_LENGTH=3000
CONTEXT_SUMMARY_LENGTH=500

# Agent Configuration
AGENT_TIMEOUT=180
AGENT_MAX_RETRIES=2
MAX_ACTIVE_QUERIES=100
MONITOR_INTERVAL=15
MONITOR_INTERVAL_SECONDS=15

# Feature Flags
ENABLE_DM=true

# Timeout Configuration
HOURGLASS_THRESHOLD_SECONDS=45
TIMEOUT_THRESHOLD_SECONDS=180

# Lambda Configuration
PYTHON_RUNTIME=python3.12
LAMBDA_TIMEOUT=180
LAMBDA_MEMORY_SIZE=512
ROUTER_TIMEOUT=150
ROUTER_MEMORY_SIZE=1024
METRICS_TIMEOUT=180
METRICS_MEMORY_SIZE=512

# OpenSearch Configuration (for metrics)
OPENSEARCH_HOST=https://your-opensearch-endpoint.region.es.amazonaws.com
OPENSEARCH_VPC_ENDPOINT_ID=aos-your-endpoint-id
OPENSEARCH_VPC_ENDPOINT_URL=https://your-vpc-endpoint-url
OPENSEARCH_DOMAIN_ARN=arn:aws:es:region:account:domain/your-domain
OPENSEARCH_DOMAIN_ACCOUNT=your-opensearch-account-id
OPENSEARCH_REGION=us-east-1
OPENSEARCH_SERVICE=es

# VPC Configuration
VPC_ID=vpc-your-vpc-id
SUBNET_IDS=subnet-id1,subnet-id2,subnet-id3,subnet-id4,subnet-id5,subnet-id6
SECURITY_GROUP_NAME=oscar-metrics-lambda-sg
SECURITY_GROUP_ID=sg-your-security-group-id

# Cross-Account Roles
METRICS_ROLE_ARN=arn:aws:iam::your-opensearch-account:role/OpenSearchOscarAccessRole
METRICS_CROSS_ACCOUNT_ROLE_ARN=arn:aws:iam::your-opensearch-account:role/OpenSearchOscarAccessRole

# OpenSearch Indices
OPENSEARCH_INTEGRATION_TEST_INDEX=opensearch-integration-test-results-*
OPENSEARCH_BUILD_RESULTS_INDEX=opensearch-distribution-build-results-*
OPENSEARCH_RELEASE_METRICS_INDEX=opensearch_release_metrics

# OpenSearch Query Settings
OPENSEARCH_DEFAULT_QUERY_SIZE=500
OPENSEARCH_LARGE_QUERY_SIZE=1000
OPENSEARCH_REQUEST_TIMEOUT=45

# Channel Mappings (JSON format)
CHANNEL_MAPPINGS='{"channel-name":"C123456789","another-channel":"C987654321"}'

# Metrics Lambda Functions
METRICS_TEST_FUNCTION=oscar-test-metrics-agent-new
METRICS_BUILD_FUNCTION=oscar-build-metrics-agent-new
METRICS_RELEASE_FUNCTION=oscar-release-metrics-agent-new
METRICS_DEPLOYMENT_FUNCTION=oscar-deployment-metrics-agent-new

# Agent Query Templates
AGENT_QUERY_ANNOUNCE="Send a release announcement message to channel {channel} using the release-announcement template for version {version} {rc_param}. Ensure the template is filled out correctly."
AGENT_QUERY_ASSIGN_OWNER="Send a release owner assignment message to channel {channel} using the release-owner-assignment template for version {version} {rc_param}. Make sure to ping any relevant people and ensure the template is filled out correctly."
AGENT_QUERY_REQUEST_OWNER="Send a request for release owner message to channel {channel} using the request-release-owner template for version {version} {rc_param}. Ensure the template is filled out correctly."
AGENT_QUERY_RC_DETAILS="Send RC details message to channel {channel} using the rc-details template for version {version} {rc_param}. Ensure the template is filled out correctly."
AGENT_QUERY_MISSING_NOTES="Send a missing release notes message to channel {channel} using the missing-release-notes template for version {version} {rc_param}. Ensure that relevant maintainers are pinged and the template is filled out correctly."
AGENT_QUERY_INTEGRATION_TEST="Send an integration test status message to channel {channel} for version {version} {rc_param}. Format the response well."
AGENT_QUERY_BROADCAST="Process the following user_query and broadcast the response to channel {channel}. Here is the user_query: {user_query}."

# Thread Pool Configuration
MAX_WORKERS=50

# Message Formatting
MESSAGE_PREVIEW_LENGTH=100
QUERY_PREVIEW_LENGTH=50
RESPONSE_PREVIEW_LENGTH=50

# Slack Handler Configuration
SLACK_HANDLER_THREAD_NAME_PREFIX="oscar-agent"

# Communication Handler Configuration
BEDROCK_RESPONSE_MESSAGE_VERSION="1.0"
BEDROCK_ACTION_GROUP_NAME="communication-orchestration"

# Model Configuration
MODEL_ARN=arn:aws:bedrock:us-east-1::foundation-model/anthropic.claude-3-5-haiku-20241022-v1:0

# Logging Configuration
LOG_LEVEL=INFO
REQUEST_TIMEOUT=30
MAX_RESULTS=500
MOCK_MODE=false

# Regex Patterns
CHANNEL_ID_PATTERN="\\b(C[A-Z0-9]{10,})\\b"
CHANNEL_REF_PATTERN="#([a-z0-9-]+)"
AT_SYMBOL_PATTERN="@([a-zA-Z0-9_-]+)"
MENTION_PATTERN="<@[A-Z0-9]+>"
HEADING_PATTERN="^#{1,6}\\s+(.+)$"
BOLD_PATTERN="\\*\\*(.+?)\\*\\*"
ITALIC_PATTERN="(?<!\\*)\\*([^*]+?)\\*(?!\\*)"
LINK_PATTERN="\\[([^\\]]+)\\]\\(([^)]+)\\)"
BULLET_PATTERN="^[\\*\\-]\\s+"
CHANNEL_MENTION_PATTERN="(?<!<)#([a-zA-Z0-9_-]+)(?!>)"
VERSION_PATTERN="version\\s+(\\d+\\.\\d+\\.\\d+)"

# Logging Preview Settings
LOG_QUERY_PREVIEW_LENGTH=100
LOG_CONTEXT_PREVIEW_LENGTH=200
LOG_HISTORY_PREVIEW_LENGTH=50
LOG_MAX_HISTORY_ENTRIES=2

# Configuration Validation
DISABLE_CONFIG_VALIDATION=false
DISABLE_METRICS_CONFIG_VALIDATION=false

